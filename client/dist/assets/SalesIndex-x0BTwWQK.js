import{r as c,c as v,j as e,G as n,d as j,T as y,w as X}from"./index-BFgOO9FV.js";import{T as R,a as U,b as F,c as N,d as l,e as O,S as Z}from"./Search-BptgNfeq.js";import{a as k}from"./axios-CMf68hJO.js";import{T as f,S as ee}from"./TextField-uMyB6taY.js";import{M as P}from"./MenuItem-DdWCPvaA.js";import{l as te}from"./logo (1)-D-rUVK23.js";import{h as E}from"./moment-G82_0lEo.js";import{F as se}from"./OutlinedInput-CU74RVD_.js";import{D as W,a as q,b as I}from"./DialogContent-BR2G1wlf.js";const re=({onClose:h})=>{const[d,C]=c.useState([]),[p,i]=c.useState({pro_id:"",sale_address:"",quantity:"",price:"",gst:"",total:""}),[u,x]=c.useState({pro_id:"",sale_address:"",quantity:"",price:"",gst:"",total:""});c.useEffect(()=>{k.get(`${v.apiUrl}/product/getProductData`).then(s=>{C(s.data)}).catch(s=>{console.log("Product Data is not fetched.",s)})},[]);const D=(s,r)=>{let t="";const o=r&&typeof r=="string"?r.trim():r;switch(s){case"pro_id":o||(t="Product Name is Required");break;case"sale_address":o||(t="Address is Required");break;case"quantity":o||(t="Quantity is Required");break;case"price":o||(t="Price is Required");break;case"total":o||(t="Total is Required");break;case"gst":o||(t="GST is Required");break}return t},g=s=>{const{name:r,value:t}=s.target,o=D(r,t);i({...p,[r]:t}),x({...u,[r]:o})},m=s=>{s.preventDefault();let r={};if(Object.keys(p).forEach(t=>{const o=p[t],S=D(t,o);S&&(r[t]=S)}),Object.keys(r).length>0){x(r);return}k.post(`${v.apiUrl}/sales/saveSales`,p).then(t=>{h()}).catch(t=>{console.log("Sales Data is not added.",t)})},_=()=>{i({pro_id:"",sale_address:"",quantity:"",price:"",gst:"",total:""}),x({pro_id:"",sale_address:"",quantity:"",price:"",gst:"",total:""})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Add Purchase"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,select:!0,name:"pro_id",label:"Product Name",value:p.pro_id,onChange:g,error:!!u.pro_id,helperText:u.pro_id,children:d.map(s=>e.jsx(P,{value:s.pro_id,children:s.pro_name},s.pro_id))})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"sale_address",label:"Address",value:p.sale_address,onChange:g,error:!!u.sale_address,helperText:u.sale_address})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"quantity",label:"Quantity",type:"number",value:p.quantity,onChange:g,error:!!u.quantity,helperText:u.quantity})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"price",label:"Price",type:"number",value:p.price,onChange:g,error:!!u.price,helperText:u.price})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"gst",label:"GST",type:"number",value:p.gst,onChange:g,error:!!u.gst,helperText:u.gst})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"total",label:"Total",type:"number",value:p.total,onChange:g,error:!!u.total,helperText:u.total})}),e.jsxs(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(j,{onClick:m,children:"Submit"}),e.jsx(j,{onClick:_,style:{marginLeft:"20px"},children:"Clear"})]})]})]})},le=({onClose:h,data:d})=>{const[C,p]=c.useState([]),[i,u]=c.useState({pro_id:d?d.pro_id:"",sale_address:d?d.sale_address:"",quantity:d?d.quantity:"",price:d?d.price:"",gst:d?d.gst:"",total:d?d.total:""}),[x,D]=c.useState({pro_id:"",sale_address:"",quantity:"",price:"",gst:"",total:""});c.useEffect(()=>{k.get(`${v.apiUrl}/product/getProductData`).then(s=>{p(s.data)}).catch(s=>{console.log("Product Data is not fetched.",s)})},[]);const g=(s,r)=>{let t="";const o=r&&typeof r=="string"?r.trim():r;switch(s){case"pro_id":o||(t="Product Name is Required");break;case"sale_address":o||(t="Address is Required");break;case"quantity":o||(t="Quantity is Required");break;case"price":o||(t="Price is Required");break;case"total":o||(t="Total is Required");break;case"gst":o||(t="GST is Required");break}return t},m=s=>{const{name:r,value:t}=s.target,o=g(r,t);u({...i,[r]:t}),D({...x,[r]:o})},_=s=>{s.preventDefault();let r={};if(Object.keys(i).forEach(t=>{const o=i[t],S=g(t,o);S&&(r[t]=S)}),Object.keys(r).length>0){D(r);return}k.put(`${v.apiUrl}/sales/update/${d.sale_id}`,i).then(t=>{h()}).catch(t=>{console.log("Sales Data is not added.",t)})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Add Purchase"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,select:!0,name:"pro_id",label:"Product Name",value:i.pro_id,onChange:m,error:!!x.pro_id,helperText:x.pro_id,children:C.map(s=>e.jsx(P,{value:s.pro_id,children:s.pro_name},s.pro_id))})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"sale_address",label:"Address",value:i.sale_address,onChange:m,error:!!x.sale_address,helperText:x.sale_address})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"quantity",label:"Quantity",type:"number",value:i.quantity,onChange:m,error:!!x.quantity,helperText:x.quantity})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"price",label:"Price",type:"number",value:i.price,onChange:m,error:!!x.price,helperText:x.price})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"gst",label:"GST",type:"number",value:i.gst,onChange:m,error:!!x.gst,helperText:x.gst})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(f,{fullWidth:!0,name:"total",label:"Total",type:"number",value:i.total,onChange:m,error:!!x.total,helperText:x.total})}),e.jsx(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(j,{onClick:_,children:"Update"})})]})]})},ae=({data:h,dueDate:d})=>e.jsxs("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[e.jsx(y,{variant:"h4",align:"center",style:{marginBottom:"20px"},children:"Invoice"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,display:"flex",justifyContent:"end",children:e.jsx("img",{src:te,alt:"Company Logo",width:"100",height:"100"})}),e.jsxs(n,{item:!0,xs:4,children:[e.jsx(y,{variant:"h6",style:{fontWeight:"bold"},children:"From"}),e.jsx(y,{children:h.purch_address})]}),e.jsxs(n,{item:!0,xs:4,children:[e.jsx(y,{variant:"h6",style:{fontWeight:"bold"},children:"To"}),e.jsx(y,{children:"Krishna Industries"}),e.jsx(y,{children:"Peelamedu, Singanallur"}),e.jsx(y,{children:"Coimbatore, 627757"})]}),e.jsxs(n,{item:!0,xs:4,children:[e.jsxs(y,{variant:"h6",style:{display:"inline-block",marginRight:"20px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Invoice Date    : "})," ",E().format("YYYY-MM-DD")]}),e.jsxs(y,{variant:"h6",style:{display:"inline-block",marginTop:"2px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Due Date           :"})," ",E(d).format("YYYY-MM-DD")]})]})]}),e.jsx(R,{style:{marginTop:"20px"},children:e.jsxs(U,{children:[e.jsx(F,{children:e.jsxs(N,{children:[e.jsx(l,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"S.No"}),e.jsx(l,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Product Name"}),e.jsx(l,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Description"}),e.jsx(l,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Quantity"}),e.jsx(l,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Price"}),e.jsx(l,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Total"})]})}),e.jsx(O,{children:e.jsxs(N,{children:[e.jsx(l,{style:{border:"1px solid #ddd"},children:"01"}),e.jsx(l,{style:{border:"1px solid #ddd"},children:h.pro_name}),e.jsx(l,{style:{border:"1px solid #ddd"},children:h.specification}),e.jsx(l,{style:{border:"1px solid #ddd"},children:h.quantity}),e.jsx(l,{style:{border:"1px solid #ddd"},children:h.price}),e.jsx(l,{style:{border:"1px solid #ddd"},children:h.total})]})})]})}),e.jsxs("div",{style:{marginTop:"20px",borderTop:"1px solid #ddd",textAlign:"right"},children:[e.jsxs(y,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"Price"})," : ",h.price]}),e.jsxs(y,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"GST 18%"})," : ",h.gst]}),e.jsxs(y,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"Total"})," : ",h.total]})]})]}),ne=({data:h})=>{const[d,C]=c.useState(null),p=()=>{const i=document.getElementById("printButton");i&&(i.style.display="none"),window.print(),i&&(i.style.display="block")};return e.jsx(e.Fragment,{children:d?e.jsxs(e.Fragment,{children:[e.jsx(ae,{data:h,dueDate:d}),e.jsx(j,{id:"printButton",onClick:p,style:{display:"block",margin:"20px auto"},children:"Print"})]}):e.jsx(f,{label:"Due Date",type:"date",InputLabelProps:{shrink:!0},onChange:i=>C(i.target.value),value:d})})},me=()=>{const[h,d]=c.useState([]),[C,p]=c.useState([]),[i,u]=c.useState(5),[x,D]=c.useState(1),[g,m]=c.useState(!1),[_,s]=c.useState(!1),[r,t]=c.useState(!1),[o,S]=c.useState(),[A,G]=c.useState(),[Y,T]=c.useState(!1),[$,B]=c.useState([]);c.useEffect(()=>{k.get(`${v.apiUrl}/sales/getSale`).then(a=>{d(a.data),p(a.data)}).catch(a=>{console.log("Sales Data could not be fetched.",a)})},[g,_,r]);const M=a=>{const b=parseInt(a.target.value,10);b==1?(u(h.length),D(1)):(u(b),D(1))},Q=(x-1)*i,L=x*i,V=C.slice(Q,L),z=a=>{const b=h.find(w=>w.sale_id===a);b&&(S(b),s(!0))},H=a=>{a&&(G(a),t(!0))},K=()=>{A&&k.delete(`${v.apiUrl}/sales/delete/${A}`).then(a=>{t(!1)}).catch(a=>{console.log("Sales Data is not deleted.",a)})},J=a=>{const b=h.find(w=>w.sale_id===a);b&&(B(b),T(!0))};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Sales Index"}),e.jsxs(n,{container:!0,spacing:3,className:"mt-3",children:[e.jsx(n,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(j,{onClick:()=>m(!0),children:"Add New"})}),e.jsx(n,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(Z,{data:h,setData:p})}),e.jsx(n,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(se,{children:e.jsxs(ee,{value:i,onChange:M,children:[e.jsx(P,{value:5,children:"5 Per Page"}),e.jsx(P,{value:10,children:"10 Per Page"}),e.jsx(P,{value:15,children:"15 Per Page"}),e.jsx(P,{value:1,children:"All Per Page"})]})})})]}),e.jsx(R,{component:X,className:"mt-3",children:e.jsxs(U,{children:[e.jsx(F,{children:e.jsxs(N,{children:[e.jsx(l,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(l,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(l,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(l,{style:{fontWeight:"bold"},children:"Quantity"}),e.jsx(l,{style:{fontWeight:"bold"},children:"Price"}),e.jsx(l,{style:{fontWeight:"bold"},children:"Total"}),e.jsx(l,{style:{fontWeight:"bold"},children:"GST"}),e.jsx(l,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(O,{children:V.map((a,b)=>e.jsxs(N,{children:[e.jsx(l,{children:b+1}),e.jsx(l,{children:a.pro_name}),e.jsx(l,{children:a.sale_address}),e.jsx(l,{children:a.quantity}),e.jsx(l,{children:a.price}),e.jsx(l,{children:a.gst}),e.jsx(l,{children:a.total}),e.jsxs(l,{children:[e.jsx(j,{onClick:()=>J(a.sale_id),children:"Invoice"}),e.jsx(j,{onClick:()=>z(a.sale_id),children:"Edit"}),e.jsx(j,{onClick:()=>H(a.sale_id),children:"Delete"})]})]},b))})]})}),e.jsxs(W,{open:g,onClose:()=>m(!1),maxWidth:"md",children:[e.jsx(q,{children:e.jsx(re,{onClose:()=>m(!1)})}),e.jsx(I,{children:e.jsx(j,{onClick:()=>m(!1),children:"Close"})})]}),e.jsxs(W,{open:_,onClose:()=>s(!1),maxWidth:"md",children:[e.jsx(q,{children:e.jsx(le,{data:o,onClose:()=>s(!1)})}),e.jsx(I,{children:e.jsx(j,{onClick:()=>s(!1),children:"Close"})})]}),e.jsxs(W,{open:Y,onClose:()=>T(!1),maxWidth:"md",children:[e.jsx(q,{children:e.jsx(ne,{data:$,onClose:()=>T(!1)})}),e.jsxs(I,{className:"mt-5",children:[e.jsx(j,{onClick:()=>window.print(),style:{display:"block"},children:"Print"}),e.jsx(j,{onClick:()=>T(!1),children:"Close"})]})]}),e.jsxs(W,{open:r,onClose:()=>t(!1),children:[e.jsx(q,{children:e.jsx("p",{children:"Are you sure do you want to delete this Sales data ?"})}),e.jsxs(I,{children:[e.jsx(j,{onClick:K,style:{backgroundColor:"red",color:"whitesmoke"},children:"Delete"}),e.jsx(j,{onClick:()=>t(!1),style:{backgroundColor:"green",color:"whitesmoke"},children:"Cancel"})]})]})]})};export{me as default};

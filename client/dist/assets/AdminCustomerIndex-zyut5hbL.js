import{r as i,j as e,G as u,d as m,c as W,w as H,S as J}from"./index-BFgOO9FV.js";import{a as T}from"./axios-CMf68hJO.js";import{S as K,T as L,a as Q,b as X,c as v,d as n,e as Y}from"./Search-BptgNfeq.js";import{T as j,S as Z}from"./TextField-uMyB6taY.js";import{A as ee}from"./AdminAddCustPurch-ZebfvXbs.js";import{F as te}from"./OutlinedInput-CU74RVD_.js";import{M as y}from"./MenuItem-DdWCPvaA.js";import{P as se}from"./Pagination-Jcemn9fm.js";import{D as P,a as S,b as k}from"./DialogContent-BR2G1wlf.js";const re=({data:r,onClose:b})=>{const[o,_]=i.useState({cust_name:r?r.cust_name:"",cust_mobile:r?r.cust_mobile:"",cust_email:r?r.cust_email:"",cust_company:r?r.cust_company:"",cust_address:r?r.cust_address:"",cust_state:r?r.cust_state:"",cust_city:r?r.cust_city:""}),[a,f]=i.useState({cust_name:"",cust_mobile:"",cust_email:"",cust_company:"",cust_address:"",cust_state:"",cust_city:""}),p=(C,l)=>{let s="";const c=l&&typeof l=="string"?l.trim():l;switch(C){case"cust_name":c||(s="Customer name is required.");break;case"cust_mobile":c||(s="Customer mobile is required.");break;case"cust_email":c||(s="Customer Email is required.");break;case"cust_company":c||(s="Customer Company is required.");break;case"cust_address":c||(s="Customer Address is required.");break;case"cust_state":c||(s="Customer State is required.");break;case"cust_city":c||(s="Customer City is required.");break}return s},d=C=>{const{name:l,value:s}=C.target,c=p(l,s);_({...o,[l]:s}),f({...a,[l]:c})},D=C=>{C.preventDefault();let l={};if(Object.keys(o).forEach(s=>{const c=o[s],x=p(s,c);x&&(l=x)}),Object.keys(l).length>0){f(l);return}T.put(`${W.apiUrl}/customer/update/${r.cust_id}`,o).then(s=>{b()}).catch(s=>{console.log("Error:",s)})};return e.jsx(e.Fragment,{children:e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Customer Name",name:"cust_name",onChange:d,value:o.cust_name,error:!!a.cust_name,helperText:a.cust_name})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Customer Mobile",name:"cust_mobile",onChange:d,value:o.cust_mobile,error:!!a.cust_mobile,helperText:a.cust_mobile})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Customer Email",name:"cust_email",onChange:d,value:o.cust_email,error:!!a.cust_email,helperText:a.cust_email})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Customer Company",name:"cust_company",onChange:d,value:o.cust_company,error:!!a.cust_company,helperText:a.cust_company})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Customer Address",name:"cust_address",onChange:d,value:o.cust_address,error:!!a.cust_address,helperText:a.cust_address})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Customer State",name:"cust_state",onChange:d,value:o.cust_state,error:!!a.cust_state,helperText:a.cust_state})}),e.jsx(u,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Customer City",name:"cust_city",onChange:d,value:o.cust_city,error:!!a.cust_city,helperText:a.cust_city})}),e.jsx(u,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(m,{onClick:D,variant:"contained",color:"primary",children:"Submit"})})]})})},me=()=>{const[r,b]=i.useState([]),[o,_]=i.useState([]),[a,f]=i.useState(5),[p,d]=i.useState(1),[D,C]=i.useState(!1),[l,s]=i.useState(!1),[c,x]=i.useState(!1),[A,E]=i.useState([]),[U,w]=i.useState(),[I,g]=i.useState(!1),[N,O]=i.useState();i.useEffect(()=>{T.get(`${W.apiUrl}/customer/getCustomerForAdmin`).then(t=>{b(t.data),_(t.data)}).catch(t=>{console.log("Customer Data is not fetched.")})},[D,l,c]);const q=t=>{const h=r.find(z=>z.cust_id===t);h&&(E(h),s(!0))},F=t=>{w(t),x(!0)},M=()=>{T.delete(`${W.apiUrl}/customer/delete/${U}`).then(t=>{x(!1)}).catch(t=>{console.log("Error deleting data. Please try again later.")})},$=t=>{const h=parseInt(t.target.value,10);h==1?(f(r.length),d(1)):(f(h),d(1))},B=(p-1)*a,G=p*a,R=o.slice(B,G),V=t=>{O(t),g(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Customer Index"}),e.jsxs(u,{container:!0,spacing:2,className:"mt-3",children:[e.jsx(u,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(K,{data:r,setData:_})}),e.jsx(u,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(te,{children:e.jsxs(Z,{value:a,onChange:$,children:[e.jsx(y,{value:5,children:"5 Per Page"}),e.jsx(y,{value:10,children:"10 Per Page"}),e.jsx(y,{value:15,children:"15 Per Page"}),e.jsx(y,{value:1,children:"All Per Page"})]})})})]}),e.jsx(L,{component:H,className:"mt-3",children:e.jsxs(Q,{style:{borderCollapse:"collapse"},children:[e.jsx(X,{children:e.jsxs(v,{children:[e.jsx(n,{style:{fontWeight:"bold"},children:"S.no"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Employee Name"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Customer Name"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Mobile"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Email"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Company"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(n,{style:{fontWeight:"bold"},children:"State"}),e.jsx(n,{style:{fontWeight:"bold"},children:"City"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(Y,{children:R.map((t,h)=>e.jsxs(v,{children:[e.jsx(n,{children:h+1}),e.jsx(n,{children:t.emp_name}),e.jsx(n,{children:t.cust_name}),e.jsx(n,{children:t.cust_mobile}),e.jsx(n,{children:t.cust_email}),e.jsx(n,{children:t.cust_company}),e.jsx(n,{children:t.cust_address}),e.jsx(n,{children:t.cust_state}),e.jsx(n,{children:t.cust_city}),e.jsxs(n,{children:[e.jsx(m,{onClick:()=>V(t.cust_id),children:"Purchase"}),e.jsx(m,{onClick:()=>q(t.cust_id),children:"Edit"}),e.jsx(m,{onClick:()=>F(t.cust_id),children:"Delete"})]})]},t.cust_id))})]})}),e.jsx(u,{container:!0,spacing:2,display:"flex",justifyContent:"center",className:"mt-4",children:e.jsx(J,{spacing:2,children:e.jsx(se,{count:Math.ceil(r.length/a),page:p,onChange:(t,h)=>d(h),size:"small",style:{cursor:"pointer","&:hover":{backgroundColor:"transparent"}}})})}),e.jsxs(P,{open:l,onClose:()=>s(!1),maxWidth:"lg",children:[e.jsx(S,{children:e.jsx(re,{data:A,onClose:()=>s(!1)})}),e.jsx(k,{children:e.jsx(m,{onClick:()=>s(!1),children:"Close"})})]}),e.jsxs(P,{open:c,onClose:()=>x(!1),children:[e.jsx(S,{children:e.jsx("p",{children:"Are you sure you want to delete this Customer data?"})}),e.jsxs(k,{children:[e.jsx(m,{onClick:M,style:{backgroundColor:"red",color:"white"},children:"Delete"}),e.jsx(m,{onClick:()=>x(!1),style:{backgroundColor:"green",color:"white"},children:"Cancel"})]})]}),e.jsxs(P,{open:I,onClose:()=>g(!1),maxWidth:"lg",children:[e.jsx(S,{children:e.jsx(ee,{cust_id:N,onClose:()=>g(!1)})}),e.jsx(k,{children:e.jsx(m,{onClick:()=>g(!1),children:"Close"})})]})]})};export{me as default};

import{r as d,j as e,G as p,d as u,c as A,y as B,w as G}from"./index-BFgOO9FV.js";import{a as v}from"./axios-CMf68hJO.js";import{S as M,T as H,a as z,b as J,c as U,d as x,e as K}from"./Search-BptgNfeq.js";import{T as w,S as L}from"./TextField-uMyB6taY.js";import{F as Q}from"./OutlinedInput-CU74RVD_.js";import{M as y}from"./MenuItem-DdWCPvaA.js";import{D as E,a as N,b as T}from"./DialogContent-BR2G1wlf.js";const X=({pro_id:h,onClose:_})=>{const[r,C]=d.useState([{pro_id:h,spec_name:"",spec_data:""}]),[c,j]=d.useState([{spec_name:"",spec_data:""}]),b=(s,t)=>{let a="";const n=t&&typeof t=="string"?t.trim():t;switch(s){case"spec_name":n||(a="Specification name is required.");break;case"spec_data":n||(a="Specification Data is required.");break}return a},S=(s,t)=>{const{name:a,value:n}=s.target,l=[...r],f=b(a,n);l[t][a]=n,j([...c.slice(0,t),{...c[t],[a]:f},...c.slice(t+1)]),C(l)},P=s=>{s.preventDefault();let t={};r.forEach((a,n)=>{Object.keys(a).forEach(l=>{const f=a[l],g=b(l,f);g&&(t={...t,[n]:{...t[n],[l]:g}})})}),Object.keys(t).length>0?j(t):v.post(`${A.apiUrl}/product/saveProSpec`,{specifications:r}).then(a=>{console.log("Specification Data :",r),_()}).catch(a=>{console.log("Specification Data is not added.")})},m=()=>{C([...r,{pro_id:h,spec_name:"",spec_data:""}]),j([...c,{spec_name:"",spec_data:""}])},i=s=>{const t=r.filter((n,l)=>l!==s),a=c.filter((n,l)=>l!==s);C(t),j(a)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Add Specification"}),r.map((s,t)=>{var a,n,l,f;return e.jsxs(p,{container:!0,spacing:3,className:"mt-3",children:[e.jsx(p,{item:!0,xs:6,children:e.jsx(w,{fullWidth:!0,name:"spec_name",label:"Specification name",onChange:g=>S(g,t),value:s.spec_name,error:!!((a=c[t])!=null&&a.spec_name),helperText:(n=c[t])==null?void 0:n.spec_name})}),e.jsx(p,{item:!0,xs:6,children:e.jsx(w,{fullWidth:!0,name:"spec_data",label:"Specification Data",onChange:g=>S(g,t),value:s.spec_data,error:!!((l=c[t])!=null&&l.spec_data),helperText:(f=c[t])==null?void 0:f.spec_data})}),t===r.length-1&&e.jsxs(p,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(u,{onClick:P,children:"Submit"}),e.jsx(u,{onClick:m,children:"Add"}),e.jsx(u,{onClick:()=>i(t),children:"Remove"})]})]},t)})]})},Y=({data:h,onClose:_})=>{const[r,C]=d.useState({spec_name:h?h.spec_name:"",spec_data:h?h.spec_data:""}),[c,j]=d.useState({spec_name:"",spec_data:""}),b=(m,i)=>{let s="";const t=i&&typeof i=="string"?i.trim():i;switch(m){case"spec_name":t||(s="Specification name is required.");break;case"spec_data":t||(s="Specification Data is required.");break}return s},S=m=>{const{name:i,value:s}=m.target,t=b(i,s);j({...c,[i]:t}),C({...r,[i]:s})},P=m=>{m.preventDefault();let i={};Object.keys(r).forEach(s=>{const t=r[s],a=b(s,t);a&&(i=a)}),Object.keys(i).length>0?j(i):v.put(`${A.apiUrl}/product/specUpdate/${h.spec_id}`,r).then(s=>{_()}).catch(s=>{console.log("Specification Data is not added.")})};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Add Specification"}),e.jsxs(p,{container:!0,spacing:3,className:"mt-3",children:[e.jsx(p,{item:!0,xs:6,children:e.jsx(w,{fullWidth:!0,name:"spec_name",label:"Specification name",onChange:S,value:r.spec_name,error:!!c.spec_name,helperText:c.spec_name})}),e.jsx(p,{item:!0,xs:6,children:e.jsx(w,{fullWidth:!0,name:"spec_data",label:"Specification Data",onChange:S,value:r.spec_data,error:!!c.spec_data,helperText:c.spec_data})}),e.jsx(p,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(u,{onClick:P,children:"Submit"})})]})]})},re=()=>{const{pro_id:h}=B(),[_,r]=d.useState([]),[C,c]=d.useState([]),[j,b]=d.useState(),[S,P]=d.useState(),[m,i]=d.useState(5),[s,t]=d.useState(1),[a,n]=d.useState(!1),[l,f]=d.useState(!1),[g,k]=d.useState(!1);d.useEffect(()=>{v.get(`${config.apiUrl}/product/getProSpec/?pro_id=${h}`).then(o=>{r(o.data),c(o.data)}).catch(o=>{console.log("Error :",o)})},[a,l,g]);const O=o=>{const D=_.find(V=>V.spec_id===o);D&&(b(D),f(!0))},W=o=>{P(o),k(!0)},F=()=>{S&&v.delete(`${config.apiUrl}/product/specDelete/${S}`).then(()=>{k(!1)}).catch(o=>{console.log("Specification Data is not deleted.")})},I=o=>{const D=parseInt(o.target.value,10);D==1?(i(_.length),t(1)):(i(D),t(1))},$=(s-1)*m,q=s*m,R=C.slice($,q);return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Specification Index"}),e.jsxs(p,{container:!0,spacing:3,className:"mt-2",children:[e.jsx(p,{item:!0,xs:4,children:e.jsx(u,{onClick:()=>n(!0),children:"Add New"})}),e.jsx(p,{item:!0,xs:4,children:e.jsx(M,{data:_,setData:c})}),e.jsx(p,{item:!0,xs:4,children:e.jsx(Q,{children:e.jsxs(L,{value:m,onChange:I,children:[e.jsx(y,{value:5,children:"5 Per Page"}),e.jsx(y,{value:10,children:"10 Per Page"}),e.jsx(y,{value:15,children:"15 Per Page"}),e.jsx(y,{value:1,children:"All Per Page"})]})})})]}),e.jsx(H,{component:G,className:"mt-4",children:e.jsxs(z,{children:[e.jsx(J,{children:e.jsxs(U,{children:[e.jsx(x,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(x,{style:{fontWeight:"bold"},children:"Project Name"}),e.jsx(x,{style:{fontWeight:"bold"},children:"Specification Name"}),e.jsx(x,{style:{fontWeight:"bold"},children:"Specification Data"}),e.jsx(x,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(K,{children:R.map((o,D)=>e.jsxs(U,{children:[e.jsx(x,{children:D+1}),e.jsx(x,{children:o.pro_name}),e.jsx(x,{children:o.spec_name}),e.jsx(x,{children:o.spec_data}),e.jsxs(x,{children:[e.jsx(u,{onClick:()=>O(o.spec_id),children:"Edit"}),e.jsx(u,{onClick:()=>W(o.spec_id),children:"Delete"})]})]},D))})]})}),e.jsxs(E,{open:a,onClose:()=>n(!1),children:[e.jsx(N,{children:e.jsx(X,{pro_id:h,onClose:()=>n(!1)})}),e.jsx(T,{children:e.jsx(u,{onClick:()=>n(!1),children:"Close"})})]}),e.jsxs(E,{open:l,onClose:()=>f(!1),children:[e.jsx(N,{children:e.jsx(Y,{data:j,onClose:()=>f(!1)})}),e.jsx(T,{children:e.jsx(u,{onClick:()=>f(!1),children:"Close"})})]}),e.jsxs(E,{open:g,onClose:()=>k(!1),children:[e.jsx(N,{children:e.jsx("p",{children:"Are you sure do you want to delete this specification ?"})}),e.jsxs(T,{children:[e.jsx(u,{style:{backgroundColor:"red",color:"whitesmoke"},onClick:F,children:"Delete"}),e.jsx(u,{style:{backgroundColor:"green",color:"whitesmoke"},onClick:()=>k(!1),children:"Cancel"})]})]})]})};export{re as default};

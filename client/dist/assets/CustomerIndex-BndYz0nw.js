import{r as o,j as e,G as i,d as h,c as v,w as J,S as K}from"./index-BFgOO9FV.js";import{C as L}from"./ConvertCustomer-BEVl0711.js";import{a as T}from"./axios-CMf68hJO.js";import{T as p,S as Q}from"./TextField-uMyB6taY.js";import{S as X,T as Y,a as Z,b as ee,c as E,d as r,e as te}from"./Search-BptgNfeq.js";import{A as se}from"./AddCustPurch-PLiakUja.js";import{F as re}from"./OutlinedInput-CU74RVD_.js";import{M as D}from"./MenuItem-DdWCPvaA.js";import{P as ae}from"./Pagination-Jcemn9fm.js";import{D as P,a as S,b as k}from"./DialogContent-BR2G1wlf.js";const le=({data:l,onClose:C})=>{const[u,W]=o.useState({cust_name:l?l.cust_name:"",cust_mobile:l?l.cust_mobile:"",cust_email:l?l.cust_email:"",cust_company:l?l.cust_company:"",cust_address:l?l.cust_address:"",cust_state:l?l.cust_state:"",cust_city:l?l.cust_city:""}),[a,j]=o.useState({cust_name:"",cust_mobile:"",cust_email:"",cust_company:"",cust_address:"",cust_state:"",cust_city:""}),f=(x,n)=>{let s="";const c=n&&typeof n=="string"?n.trim():n;switch(x){case"cust_name":c||(s="Customer name is required.");break;case"cust_mobile":c||(s="Customer mobile is required.");break;case"cust_email":c||(s="Customer Email is required.");break;case"cust_company":c||(s="Customer Company is required.");break;case"cust_address":c||(s="Customer Address is required.");break;case"cust_state":c||(s="Customer State is required.");break;case"cust_city":c||(s="Customer City is required.");break}return s},d=x=>{const{name:n,value:s}=x.target,c=f(n,s);W({...u,[n]:s}),j({...a,[n]:c})},_=x=>{x.preventDefault();let n={};if(Object.keys(u).forEach(s=>{const c=u[s],g=f(s,c);g&&(n=g)}),Object.keys(n).length>0){j(n);return}T.put(`${v.apiUrl}/customer/update/${l.cust_id}`,u).then(s=>{C()}).catch(s=>{console.log("Error:",s)})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:" Update Customer"}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,label:"Customer Name",name:"cust_name",onChange:d,value:u.cust_name,error:!!a.cust_name,helperText:a.cust_name})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,label:"Customer Mobile",name:"cust_mobile",onChange:d,value:u.cust_mobile,error:!!a.cust_mobile,helperText:a.cust_mobile})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,label:"Customer Email",name:"cust_email",onChange:d,value:u.cust_email,error:!!a.cust_email,helperText:a.cust_email})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,label:"Customer Company",name:"cust_company",onChange:d,value:u.cust_company,error:!!a.cust_company,helperText:a.cust_company})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,label:"Customer Address",name:"cust_address",onChange:d,value:u.cust_address,error:!!a.cust_address,helperText:a.cust_address})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,label:"Customer State",name:"cust_state",onChange:d,value:u.cust_state,error:!!a.cust_state,helperText:a.cust_state})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,label:"Customer City",name:"cust_city",onChange:d,value:u.cust_city,error:!!a.cust_city,helperText:a.cust_city})}),e.jsx(i,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(h,{onClick:_,variant:"contained",color:"primary",children:"Submit"})})]})]})},pe=()=>{const l=sessionStorage.getItem("emp_id"),[C,u]=o.useState([]),[W,a]=o.useState([]),[j,f]=o.useState(5),[d,_]=o.useState(1),[x,n]=o.useState(!1),[s,c]=o.useState(!1),[g,y]=o.useState(!1),[U,I]=o.useState([]),[N,w]=o.useState(),[A,b]=o.useState(!1),[O,q]=o.useState();o.useEffect(()=>{T.get(`${v.apiUrl}/customer/getCustomerByEmpId/${l}`).then(t=>{u(t.data),a(t.data)}).catch(t=>{console.log("Customer Data is not fetched.")})},[x,s,g]);const $=t=>{const m=C.find(H=>H.cust_id===t);m&&(I(m),c(!0))},F=t=>{w(t),y(!0)},M=()=>{T.delete(`${v.apiUrl}/customer/delete/${N}`).then(t=>{y(!1)}).catch(t=>{console.log("Error deleting data. Please try again later.")})},B=t=>{const m=parseInt(t.target.value,10);m==1?(f(C.length),_(1)):(f(m),_(1))},G=(d-1)*j,R=d*j,V=W.slice(G,R),z=t=>{q(t),b(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Customer Index"}),e.jsxs(i,{container:!0,spacing:2,className:"mt-3",children:[e.jsx(i,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(h,{onClick:()=>n(!0),children:"Add New Customer"})}),e.jsx(i,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(X,{data:C,setData:a})}),e.jsx(i,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(re,{children:e.jsxs(Q,{value:j,onChange:B,children:[e.jsx(D,{value:5,children:"5 Per Page"}),e.jsx(D,{value:10,children:"10 Per Page"}),e.jsx(D,{value:15,children:"15 Per Page"}),e.jsx(D,{value:1,children:"All Per Page"})]})})})]}),e.jsx(Y,{component:J,className:"mt-3",children:e.jsxs(Z,{style:{borderCollapse:"collapse"},children:[e.jsx(ee,{children:e.jsxs(E,{children:[e.jsx(r,{style:{fontWeight:"bold"},children:"S.no"}),e.jsx(r,{style:{fontWeight:"bold"},children:"Employee Name"}),e.jsx(r,{style:{fontWeight:"bold"},children:"Customer Name"}),e.jsx(r,{style:{fontWeight:"bold"},children:"Mobile"}),e.jsx(r,{style:{fontWeight:"bold"},children:"Email"}),e.jsx(r,{style:{fontWeight:"bold"},children:"Company"}),e.jsx(r,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(r,{style:{fontWeight:"bold"},children:"State"}),e.jsx(r,{style:{fontWeight:"bold"},children:"City"}),e.jsx(r,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(te,{children:V.map((t,m)=>e.jsxs(E,{children:[e.jsx(r,{children:m+1}),e.jsx(r,{children:t.emp_name}),e.jsx(r,{children:t.cust_name}),e.jsx(r,{children:t.cust_mobile}),e.jsx(r,{children:t.cust_email}),e.jsx(r,{children:t.cust_company}),e.jsx(r,{children:t.cust_address}),e.jsx(r,{children:t.cust_state}),e.jsx(r,{children:t.cust_city}),e.jsxs(r,{children:[e.jsx(h,{onClick:()=>z(t.cust_id),children:"Purchase"}),e.jsx(h,{onClick:()=>$(t.cust_id),children:"Edit"}),e.jsx(h,{onClick:()=>F(t.cust_id),children:"Delete"})]})]},t.cust_id))})]})}),e.jsx(i,{container:!0,spacing:2,display:"flex",justifyContent:"center",className:"mt-4",children:e.jsx(K,{spacing:2,children:e.jsx(ae,{count:Math.ceil(C.length/j),page:d,onChange:(t,m)=>_(m),size:"small",style:{cursor:"pointer","&:hover":{backgroundColor:"transparent"}}})})}),e.jsxs(P,{open:x,onClose:()=>n(!1),maxWidth:"lg",children:[e.jsx(S,{children:e.jsx(L,{onClose:()=>n(!1)})}),e.jsx(k,{children:e.jsx(h,{onClick:()=>n(!1),children:"Close"})})]}),e.jsxs(P,{open:s,onClose:()=>c(!1),maxWidth:"lg",children:[e.jsx(S,{children:e.jsx(le,{data:U,onClose:()=>c(!1)})}),e.jsx(k,{children:e.jsx(h,{onClick:()=>c(!1),children:"Close"})})]}),e.jsxs(P,{open:g,onClose:()=>y(!1),children:[e.jsx(S,{children:e.jsx("p",{children:"Are you sure you want to delete this Customer data?"})}),e.jsxs(k,{children:[e.jsx(h,{onClick:M,style:{backgroundColor:"red",color:"white"},children:"Delete"}),e.jsx(h,{onClick:()=>y(!1),style:{backgroundColor:"green",color:"white"},children:"Cancel"})]})]}),e.jsxs(P,{open:A,onClose:()=>b(!1),maxWidth:"lg",children:[e.jsx(S,{children:e.jsx(se,{cust_id:O,onClose:()=>b(!1)})}),e.jsx(k,{children:e.jsx(h,{onClick:()=>b(!1),children:"Close"})})]})]})};export{pe as default};
